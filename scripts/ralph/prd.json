{
	"project": "falcon-dash",
	"branchName": "ralph/phase-6-mobile-polish",
	"description": "Phase 6: Mobile & Polish â€” Dedicated mobile layout pass, touch optimization, PWA offline support, accessibility, performance, themes, and onboarding wizard.",
	"userStories": [
		{
			"id": "US-072",
			"title": "Mobile bottom tab bar and single-pane navigation",
			"description": "Replace sidebar navigation with a bottom tab bar on mobile (< md breakpoint). Tabs: Chat, Projects, Files, Jobs, More. Chat tab opens channel list, tap to enter conversation. More tab shows Settings, Passwords, Custom Apps overflow.",
			"acceptanceCriteria": [
				"Bottom tab bar visible on mobile (< 768px), hidden on desktop",
				"Sidebar hidden on mobile, visible on desktop (existing behavior preserved)",
				"5 tabs: Chat (ðŸ’¬), Projects (ðŸ“‹), Files (ðŸ“), Jobs (ðŸ¤–), More (âš™ï¸)",
				"Active tab highlighted with accent color",
				"Unread badge on Chat tab when new messages exist",
				"Chat tab: shows session list, tap session enters conversation, back button returns to list",
				"More tab: shows Settings, Passwords, Custom Apps in a list",
				"Tab bar always visible except when keyboard is open",
				"Smooth transitions between tab views",
				"npm run format passes",
				"npm run check passes with 0 errors",
				"npm run build succeeds"
			],
			"priority": 1,
			"passes": true,
			"notes": "Reference architecture doc Â§19 mobile layout section. Use Tailwind responsive classes: hidden md:block for desktop-only, md:hidden for mobile-only. The tab bar is a persistent footer component."
		},
		{
			"id": "US-073",
			"title": "Touch gestures and mobile interactions",
			"description": "Add touch-optimized interactions across all modules. Minimum 44x44px tap targets, swipe-to-navigate, pull-to-refresh, long-press context menus, bottom sheet modals.",
			"acceptanceCriteria": [
				"All interactive elements have minimum 44x44px tap target area",
				"Swipe right to go back (on conversation view, project detail, file preview)",
				"Pull-to-refresh on session list, project list, file list",
				"Long-press on messages for action menu (copy, reply, react)",
				"Long-press on tasks for quick actions (status change, move)",
				"Bottom sheet pattern for mobile modals (create task, add comment, settings panels)",
				"Dialogs use bottom sheet on mobile, centered modal on desktop",
				"Touch-friendly scrolling (no horizontal scroll traps)",
				"npm run format passes",
				"npm run check passes with 0 errors"
			],
			"priority": 2,
			"passes": false,
			"notes": "Use touch events (touchstart, touchmove, touchend) for swipe detection. Pull-to-refresh: detect overscroll at top + pull down gesture. Bottom sheet: fixed bottom panel that slides up with backdrop."
		},
		{
			"id": "US-074",
			"title": "PWA offline mode and push notifications",
			"description": "Enhance PWA with offline read-only mode (cached chat history, project data), background sync for queued actions, and push notification support for agent events.",
			"acceptanceCriteria": [
				"Service worker caches app shell and static assets for offline access",
				"Offline indicator shown when connection is lost",
				"Cached chat history viewable offline (read-only)",
				"Cached project/task data viewable offline (read-only)",
				"Actions performed offline are queued and synced when online",
				"Push notification registration on first install",
				"Notifications for: agent completed response, mentions, cron job alerts",
				"Notification click navigates to relevant content",
				"Notification sound (configurable, default on)",
				"Tab title update with unread count",
				"npm run format passes",
				"npm run check passes with 0 errors",
				"npm run build succeeds"
			],
			"priority": 3,
			"passes": false,
			"notes": "vite-plugin-pwa is already configured from Phase 1. Extend the workbox config with runtime caching for API responses. Push notifications require a VAPID key pair â€” generate and store in config. Background sync uses the SyncManager API."
		},
		{
			"id": "US-075",
			"title": "Accessibility pass",
			"description": "Comprehensive accessibility audit and fixes across all modules. ARIA labels, keyboard navigation, screen reader support, focus management, visible focus indicators, skip links.",
			"acceptanceCriteria": [
				"All interactive elements have ARIA labels or aria-labelledby",
				"All images/icons have alt text or aria-hidden",
				"Full keyboard navigation: Tab through all controls, Enter/Space to activate",
				"Visible focus indicators on all focusable elements (ring-2 ring-blue-500 or similar)",
				"Skip link to main content at top of page",
				"ARIA roles on landmark regions (navigation, main, complementary)",
				"ARIA live regions for dynamic content (chat messages, notifications)",
				"Color contrast meets WCAG 2.1 AA (4.5:1 for text, 3:1 for large text)",
				"Form inputs have associated labels",
				"Error messages associated with form fields via aria-describedby",
				"npm run format passes",
				"npm run check passes with 0 errors"
			],
			"priority": 4,
			"passes": false,
			"notes": "Focus on the most-used flows first: chat, project management, navigation. Use axe-core or similar for automated checks. Manual test with keyboard-only navigation."
		},
		{
			"id": "US-076",
			"title": "Performance optimization",
			"description": "Optimize bundle size, rendering performance, and loading speed. Virtual scrolling for long lists, lazy loading for heavy components, code splitting by route, image optimization.",
			"acceptanceCriteria": [
				"Virtual scrolling on chat message list (handles 1000+ messages without jank)",
				"Virtual scrolling on task lists and file lists",
				"Lazy loading for Mermaid, KaTeX, Shiki (only loaded when needed)",
				"Route-based code splitting (SvelteKit handles this, verify it works)",
				"Debounced search inputs (already done, verify consistency)",
				"Image lazy loading with loading=lazy attribute",
				"Bundle analysis: no single chunk > 500KB",
				"Lighthouse performance score > 80 on mobile",
				"npm run format passes",
				"npm run check passes with 0 errors",
				"npm run build succeeds"
			],
			"priority": 5,
			"passes": false,
			"notes": "Virtual scrolling: use a virtual list component that only renders visible items + buffer. Svelte options: svelte-virtual-list or custom implementation. For Shiki, the highlighter is already lazily initialized â€” verify Mermaid and KaTeX follow the same pattern."
		},
		{
			"id": "US-077",
			"title": "Theme system â€” dark and light mode",
			"description": "Implement a proper theme system with dark mode (default), light mode, and system-preference auto-detection. Theme toggle in settings and a quick toggle in the app header. Persist preference in localStorage.",
			"acceptanceCriteria": [
				"Three modes: dark (default), light, system (follows OS preference)",
				"Theme toggle in Dashboard settings tab (already stubbed in US-068)",
				"Quick theme toggle button in app header/sidebar",
				"Dark mode: current slate-900/slate-800 palette (already implemented)",
				"Light mode: white/gray-50 backgrounds, dark text, adjusted component colors",
				"System mode: uses prefers-color-scheme media query, updates on OS change",
				"Theme class applied to <html> element (dark/light)",
				"Tailwind dark: variant works correctly in both modes",
				"Persisted in localStorage, loaded before first paint (no flash)",
				"npm run format passes",
				"npm run check passes with 0 errors"
			],
			"priority": 6,
			"passes": false,
			"notes": "Tailwind dark mode is class-based (darkMode: 'class' in config). Add 'dark' class to <html> for dark mode, remove for light. Load preference from localStorage in a <script> in app.html (before body renders) to prevent flash of wrong theme."
		},
		{
			"id": "US-078",
			"title": "Onboarding wizard",
			"description": "Create a first-run wizard that guides new users through: gateway URL entry, token paste, connection test, optional device pairing approval, and quick overview of the dashboard.",
			"acceptanceCriteria": [
				"Wizard shown on first visit (no gateway URL in localStorage)",
				"Step 1: Welcome screen with brief description",
				"Step 2: Gateway URL input with default ws://127.0.0.1:18789",
				"Step 3: Token input (paste gateway token)",
				"Step 4: Connection test â€” attempts to connect, shows success/failure",
				"Step 5: If pairing required, show instructions for CLI approval",
				"Step 6: Quick tour â€” highlight sidebar, chat, projects, settings",
				"Skip button to bypass wizard",
				"Wizard state persisted in localStorage (don't show again)",
				"Reset wizard available in Settings > About",
				"npm run format passes",
				"npm run check passes with 0 errors",
				"npm run build succeeds",
				"npm run test passes"
			],
			"priority": 7,
			"passes": false,
			"notes": "The current connection page (/+page.svelte) already handles URL+token input. The wizard wraps this in a step-by-step flow with better UX for first-time users. After wizard completes, redirect to /chat."
		}
	]
}
